apply plugin: "java"
apply plugin: "eclipse"
apply plugin: "maven"

group = 'org.reveno'
version = '0.1.0'

repositories {
	mavenLocal()
	mavenCentral()
}

sourceSets {
	acceptanceTest {
		java {
            srcDir 'java'
        }
        resources {
            srcDir 'resources'
        }
	}
	test {
		java {
			srcDirs = ['src/test/java', 'src/acceptanceTest/java']
		}
	}
}

dependencies {
	//compile "org.scala-lang:scala-library:$scalaVersion"
		
	compile "com.lmax:disruptor:$disruptorVersion"
	compile "com.dyuproject.protostuff:protostuff-uberjar:$protostuffVersion"
	compile "io.netty:netty-buffer:$nettyVersion"
	
	compile "org.slf4j:slf4j-api:$slf4jVersion"
	compile "org.slf4j:slf4j-log4j12:$log4jVersion"
	
	testCompile "com.google.guava:guava:$guavaVersion"
	testCompile "junit:junit:$junitVersion"
	testCompile "org.easymock:easymock:$easymockVersion"
	
	acceptanceTestCompile "com.google.guava:guava:$guavaVersion"
	acceptanceTestCompile "junit:junit:$junitVersion"
	acceptanceTestCompile "org.easymock:easymock:$easymockVersion"
}

def forks = Math.max(4, (int) (Runtime.runtime.availableProcessors() / 2))

test {
	minHeapSize = "1024m"
	maxParallelForks = forks
  	
    testLogging {
        events "passed", "skipped", "failed", "standardOut", "standardError"
    }
}

task wrapper(type: Wrapper) {
   gradleVersion = '2.4' //version required
}

defaultTasks 'clean', 'build'